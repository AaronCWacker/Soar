# Test that creates unexpected RHS results based subgraph with links to superstate (but not in RHS of rule)

sp {apply16a
    (state <s> ^name substate
               ^operator.name test
               ^superstate <ss>)
    (<ss> ^test-current 1)
-->
    (<s> ^ungrounded-identifier1 <s>
         ^ungrounded-identifier2 <new-wme>)
    (<new-wme> ^foo bar)
}

# - The RHS of the chunk creates a link S1 --(result)--> S3.  That makes all the other items below S3, linked to
#   superstate, and hence results of the chunk.
sp {apply16b
    (state <s> ^name substate
               ^operator.name test
               ^superstate <ss>
               ^ungrounded-identifier1 <ungrounded-id1>
               ^ungrounded-identifier2 <ungrounded-id2>)
    (<ss> ^test-current 1)
-->
    (<ss> ^result16a <ungrounded-id1>
          ^result16b <ungrounded-id2>
          ^test-done 1)}

